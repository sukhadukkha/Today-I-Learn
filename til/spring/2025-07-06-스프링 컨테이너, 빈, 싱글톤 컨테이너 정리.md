

- ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppCOnfig.class)
- 여기서 ApplicationContext를 스프링 컨테이너라고 함
- ApplicationContext는 인터페이스임
- XML 기반으로, 애노테이션 기반으로 컨테이너 생성 가능
- 스프링 컨테이너를 생성하면, 스프링 빈 저장소가 생성됨
- 컨테이너를 생성할 때에는 AppConfig.class 처럼 구성정보를 지정해야함
- 스프링 컨테이넌느 파라미터로 넘어온 설정 클래스 정보를 사용해서 스프링 빈을 등록함
- 빈 이름은 메서드 이름을 사용, 직접 부여 가능
- 빈 이름은 항상 다른 이름 부여해야함

#### 1-1. 스프링 빈 조회 - 상속 관계

- 부모 타입으로 조회하면 자식 타입도 함께 조회됨
- Object 타입으로 조회하면, 모든 스프링 빈 조회됨

### ✨ 2. BeanFactory and ApplicationContext

- BeanFactory는 스프링 컨테이너의 최상위 인터페이스
- 스프링 빈을 관리하고 조회하는 역할 담당
- getBean() 제공
- 사용한 대부분의 기능은 BeanFactory가 제공하는 기능
- ApplicationContext는 BeanFatory 기능을 모두 상속받아서 제공
- 둘의 차이는? 부가 기능 제공
- 빈 관리기능 + 편리한 부가 기능
- BeanFactory를 직접 사용 할 일은 거의 없다. ApplicationContext 사용
- BeanFactory나ApplicationContext를 스프링 컨테이너라고 한다.

### ✨ 3. 웹 어플리케이션과 싱글톤

- 스프링은 기업용 온라인 서비스 기술을 지원하기 위해 탄생
- 대부분의 스프링 애플리케이션은 웹 애플리케이션
- 웹 애플리케이션은 여러 고객이 동시에 요청을 한다
- 스프링이 없다면 AppConfig는 요청을 할 때마다 객체를 새로 생성함.
- 트래픽이 초당 10000이 나오면 초당 10000개의 객체가 생성되고 소멸 -> 메모리 낭비
- 싱글톤 패턴 -> 객체 딱 1개만 생성되고, 공유하도록 설계하여 해결

### ✨ 4. 싱글톤 패턴

- 클래스의 인스턴스가 딱 1개만 생성되는 것을 보장
- 객체 인스턴스를 2개이상 생성하지 못하도록 막아야함.
- 여러 문제점들 존재

### ✨ 5. 싱글톤 컨테이너

- 스프링 컨테이너는 싱글톤 패턴 문제 해결하면 객체 인스턴스 싱글톤(1개만 생성)으로 관리
- 스프링 빈이 싱글톤으로 관리되는 빈
- 스프링 컨테이너는 싱글톤 컨테이너 역할을 한다.
- 스프링의 기본 빈 등록은 싱글톤이지만, 싱글톤만 지원하지는 않음.

#### 5-1. 싱글톤 방식의 주의점 
- 하나의 객체 인스턴스를 공유하기 때문에 상태를 유지하게 설계하면 안되고, 무상태로 설계해야함.
- 특정 클라이언트에 의존적인 필드가 있으면 안된다.
- 특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 안된다.
- 가급적 읽기만 가능해야함.
- 스프링 빈의 필드에 공유 값을 설정하면 큰 문제 발생할 수 있음

### ✨ 6. @Configuration
- @Configuration을 사용하면 싱글톤을 보장해줌.
- 스프링 설정 정보는 항상 @Configuration을 사용하자.
- @Configuration을 사용하면 @Bean이 붙은 메서드마다 이미 스프링 빈이 존재하면 <br> 존재하는 빈을 반환하고, 스프링 빈이 없으면, 생성해서 스프링 빈으로 등록하고, 반환하는 코드가 만들어짐.
- @Bean만 사용해도 스프링 빈으로 등록은 되지만, 싱글톤을 보장하지 않음.